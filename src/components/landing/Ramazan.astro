  <div class="flex justify-between max-w-4xl mx-auto mb-2 border-b border-gray-700">
    <div class="flex items-right justify-right mb-2 text-sm dark:text-white">ğŸŒ &nbsp;Ä°stanbul</div>
    <div id="currentTime" class="flex items-right justify-right mb-2 dark:text-white"></div>
    <div class="flex items-left justify-left mb-2 text-sm dark:text-white">ğŸ—“ï¸ &nbsp; <span class="text-sm dark:text-white" id="currentDateWithoutYear"></span></div>
  </div>
  <div id="remainingToIftarContainer" class="max-w-4xl mx-auto rounded-md bg-orange-50 p-4 dark:bg-gray-800">
    <div class="rounded-md bg-blue-50 p-4 dark:bg-gray-800">
      <div class="flex items-center justify-center">
        <div id="remainingToIftar" class=" text-4xl font-medium text-orange-800 dark:text-blue-200"></div>
      </div>
    </div>
  </div>
  <div id="remainingToImsakContainer" class="max-w-4xl mx-auto rounded-md bg-blue-50 p-4 dark:bg-gray-800 hidden">
    <div class="rounded-md bg-blue-50 p-4 dark:bg-gray-800">
      <div class="flex items-center justify-center">
        <div id="remainingToImsak" class=" text-4xl font-medium text-blue-800 dark:text-blue-200"></div>
      </div>
    </div>
  </div>
 

  <div class="mt-6 max-w-4xl mx-auto">
    <div class="bg-white dark:bg-gray-700 shadow-lg rounded-lg overflow-hidden">
      <div class="px-4 py-5 sm:p-6">
        <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white">Ä°msak ve Ä°ftar Vakitleri</h3>
        <div class="mt-2 max-w-xl text-sm text-gray-500 dark:text-gray-400"></div>
        <div class="mt-5">
          <div id="imsakContainer" class="rounded-md bg-blue-50 p-4 dark:bg-gray-800">
            <div class="flex items-center justify-between">
              <div class="text-sm font-medium text-blue-800 dark:text-blue-200">ğŸŒ™ &nbsp; Ä°msak Vakti</div>
              <div class="text-lg font-semibold text-blue-900 dark:text-blue-300" id="imsakTime"></div>
            </div>
          </div>
          <div id="iftarContainer" class="mt-3 rounded-md bg-orange-50 p-4 dark:bg-gray-800">
            <div class="flex items-center justify-between">
              <div class="text-sm font-medium text-orange-800 dark:text-orange-200">ğŸ•Œ &nbsp; Ä°ftar Vakti</div>
              <div class="text-lg font-semibold text-orange-900 dark:text-orange-300" id="iftarTime"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="max-w-4xl mx-auto mt-6">
    <article class="bg-white dark:bg-gray-700 shadow-lg rounded-lg overflow-hidden">
      <div class="px-4 py-5 sm:p-6">
        <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white">GÃ¼nÃ¼n Ayeti</h3>
        <div class="mt-5">
          <div class="mt-3 rounded-md bg-orange-50 p-4 dark:bg-gray-800">
            <div class="text-sm italic text-gray-900 dark:text-white">
              "Ey iman edenler! oruÃ§ sizden Ã¶nce gelip geÃ§miÅŸ Ã¼mmetlere farz kÄ±lÄ±ndÄ±ÄŸÄ± gibi size de farz kÄ±lÄ±ndÄ±. Umulur ki korunursunuz."
            </div>
            <span class="text-sm italic text-orange-900 dark:text-red-300">(Bakara Suresi, 183. Ayet)</span>
          </div>
        </div>
      </div>
    </article>
  </div>
  <div id="installModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden">
    <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
      <div class="mt-3 text-center">
        <h3 class="text-lg leading-6 font-medium text-gray-900">UygulamayÄ± YÃ¼kle</h3>
        <div class="mt-2 px-7 py-3">
          <p class="text-sm text-gray-500">Bu uygulamayÄ± ana ekranÄ±nÄ±za ekleyin ve daha hÄ±zlÄ± eriÅŸim saÄŸlayÄ±n.</p>
        </div>
        <div class="items-center px-4 py-3">
          <button id="confirmInstall" class="px-4 py-2 bg-blue-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
            YÃ¼kle
          </button>
        </div>
        <div class="items-center px-4 py-3">
          <button id="cancelInstall" class="px-4 py-2 bg-white text-gray-700 text-base font-medium rounded-md w-full shadow-sm hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-500">
            Ä°ptal
          </button>
        </div>
      </div>
    </div>
  </div>  <footer class="max-w-4xl  mx-auto flex justify-between items-center mt-12 text-sm text-gray-500 dark:text-gray-400">
        <p>Â© 2024 Ramadan App by BYK</p>
    </div>
    <div>
        <button id="themeToggle" class="py-2 px-4 text-white rounded bg-gray-50 hover:bg-gray-50 dark:hover:bg-gray-800 hover:text-gray-900 dark:bg-gray-800 transition duration-300 ease-in-out"></button>
    </div>
</footer>





<script>
  document.addEventListener("DOMContentLoaded", function () {
    const installModal = document.getElementById('installModal');
    const confirmInstall = document.getElementById('confirmInstall');
    const cancelInstall = document.getElementById('cancelInstall');
    let beforeInstallPromptEvent = null;

    window.addEventListener("beforeinstallprompt", function(e) {
        e.preventDefault();
        beforeInstallPromptEvent = e;
        if (!beforeInstallPromptEvent) {
          installModal.classList.add('hidden');
        } else {
          installModal.classList.remove('hidden');
        }

    confirmInstall.addEventListener("click", function() {
        if (beforeInstallPromptEvent !== null) {
            beforeInstallPromptEvent.prompt();
            beforeInstallPromptEvent.userChoice.then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                    console.log('User accepted the install prompt');
                } else {
                    console.log('User dismissed the install prompt');
                }
                installModal.classList.add('hidden');
                beforeInstallPromptEvent = null;
            });
        }
    });

    cancelInstall.addEventListener("click", function() {
        installModal.classList.add('hidden');
    });
  });


  const themeToggle = document.getElementById("themeToggle");
  const root = document.documentElement;
  const imsakTimeEl = document.getElementById("imsakTime");
  const iftarTimeEl = document.getElementById("iftarTime");
  const currentDateEl = document.getElementById("currentDateWithoutYear");
  const currentTimeEl = document.getElementById("currentTime");
  const imsakContainer = document.getElementById("remainingToImsakContainer");
  const iftarContainer = document.getElementById("remainingToIftarContainer");
  const remainingToImsakEl = document.getElementById("remainingToImsak");
  const remainingToIftarEl = document.getElementById("remainingToIftar");

  const times = {
    "2024-03-05": { imsak: "05:49", iftar: "19:13" },
    "2024-03-06": { imsak: "05:48", iftar: "19:14" },
  };

  const toggleTheme = () => {
    const newTheme = root.classList.toggle("dark") ? "dark" : "light";
    localStorage.setItem("theme", newTheme);
    themeToggle.textContent = newTheme === "dark" ? "ğŸ’¡" : "ğŸŒ‘";
  };

  const updateTheme = () => {
    const preferredTheme = localStorage.getItem("theme") || (window.matchMedia('(prefers-color-scheme: dark)').matches ? "dark" : "light");
    root.classList.toggle("dark", preferredTheme === "dark");
    themeToggle.textContent = preferredTheme === "dark" ? "ğŸ’¡" : "ğŸŒ‘";
  };

  const updateDateTimeDisplays = () => {
    const now = new Date();
    const todayFormatted = formatDate(now);
    const tomorrowFormatted = formatDate(new Date(now.getTime() + 86400000));

    const todayTimes = times[todayFormatted] || { imsak: "N/A", iftar: "N/A" };
    const { imsak, iftar } = now.getTime() >= dateFromTimeStr(now, todayTimes.iftar).getTime() ? times[tomorrowFormatted] || todayTimes : todayTimes;

    imsakTimeEl.textContent = imsak;
    iftarTimeEl.textContent = iftar;
    currentDateEl.textContent = now.toLocaleDateString("tr-TR", { weekday: "long", month: "long", day: "numeric" });
    currentTimeEl.textContent = now.toLocaleTimeString("tr-TR", { hour: '2-digit', minute: '2-digit' });

    updateRemainingTime(now, imsak, iftar, todayTimes, times[tomorrowFormatted] || todayTimes);
  };

  const updateRemainingTime = (now, imsak, iftar, todayTimes, tomorrowTimes) => {
    const iftarDate = dateFromTimeStr(now, iftar);
    let imsakDate = dateFromTimeStr(now, imsak);
    if (now > iftarDate) imsakDate = dateFromTimeStr(new Date(now.getTime() + 86400000), tomorrowTimes.imsak);

    const remaining = now < imsakDate ? formatRemainingTime(imsakDate - now) : formatRemainingTime(iftarDate - now);
    const isIftarTime = now >= imsakDate && now < iftarDate;

    imsakContainer.classList.toggle("hidden", isIftarTime);
    iftarContainer.classList.toggle("hidden", !isIftarTime);

    (isIftarTime ? remainingToIftarEl : remainingToImsakEl).textContent = remaining;
  };

  const formatDate = (date) => date.toISOString().split('T')[0];

  const dateFromTimeStr = (now, timeStr) => {
    const [hour, minute] = timeStr.split(":").map(Number);
    return new Date(now.getFullYear(), now.getMonth(), now.getDate(), hour, minute);
  };

  const formatRemainingTime = (milliseconds) => {
    const hours = Math.floor(milliseconds / (1000 * 60 * 60));
    const minutes = Math.floor((milliseconds % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((milliseconds % (1000 * 60)) / 1000);
    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
  };

  themeToggle.addEventListener("click", toggleTheme);
  updateTheme();
  updateDateTimeDisplays();
  setInterval(updateDateTimeDisplays, 1000);
});


</script>
  